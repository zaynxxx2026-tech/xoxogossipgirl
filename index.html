<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>xoxo gossip girl</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://fonts.cdnfonts.com/css/sf-pro-display">
<style>
:root{
  --pink:#ff4fd8;
  --hot:#ff1aa6;
  --violet:#b79cff;
  --bg:#0c0812;
  --card:#160d26;
  --glass:rgba(255,255,255,.08);
  --highlight:rgba(255,79,216,.5);
}

*{box-sizing:border-box;margin:0;padding:0;font-family:'SF Pro Display','SF Arabic',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;}

body{
  background:
    radial-gradient(900px 500px at 10% 10%, #2b1445, transparent),
    radial-gradient(900px 500px at 90% 20%, #1b2c5a, transparent),
    var(--bg);
  color:white;
  min-height:100vh;
  overflow-x:hidden;
  transition:background .3s;
}

header{
  position:sticky;top:0;z-index:10;
  backdrop-filter:blur(16px);
  background:linear-gradient(90deg,rgba(255,79,216,.28),rgba(207,210,255,.18));
  display:flex;justify-content:space-between;align-items:center;
  padding:14px 20px;
  border-bottom:1px solid rgba(255,255,255,.12);
}

.logo{font-weight:900;font-size:22px;letter-spacing:2px;text-shadow:0 0 18px var(--pink);}
.logo span{color:var(--pink);}
.sub{font-size:12px;opacity:.75;margin-top:2px;}

.admin-btn{
  padding:6px 14px;border-radius:999px;border:none;
  background:linear-gradient(135deg,var(--pink),var(--hot));
  font-weight:700;cursor:pointer;color:#000;
}

.wrap{
  max-width:1000px;margin:26px auto;padding:20px;
  display:flex;gap:26px;flex-wrap:wrap;
}

.card{
  flex:1 1 320px;
  background:linear-gradient(180deg,var(--glass),transparent);
  border-radius:26px;
  padding:22px;
  box-shadow:0 12px 50px rgba(255,26,166,.35);
  animation:fadeUp .6s ease;
  position:relative;
}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(12px)}
  to{opacity:1;transform:none}
}

textarea{
  width:100%;padding:16px;border-radius:18px;
  background:#1f1433;border:none;color:white;
  font-size:15px;resize:none;
}

.buttons{
  display:flex;gap:12px;margin-top:14px;
}

button{
  border:none;border-radius:999px;padding:12px 18px;
  font-weight:700;cursor:pointer;
  background:linear-gradient(135deg,var(--pink),var(--hot));
  color:#000;display:flex;align-items:center;justify-content:center;
}

.preview{
  margin-top:14px;max-width:100%;border-radius:18px;
  box-shadow:0 0 28px rgba(255,79,216,.55);
}

.post{
  background:#1f1433;padding:16px;border-radius:18px;
  margin-bottom:14px;cursor:pointer;
  display:flex;align-items:center;gap:12px;
  transition:transform .25s, box-shadow .25s;
}

.post:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 30px rgba(255,79,216,.45);
}

.post img{
  width:48px;height:48px;border-radius:12px;object-fit:cover;
}

.time{
  font-size:11px;opacity:.55;margin-top:6px;
}

.badge{
  position:absolute;top:10px;right:10px;
  background:var(--pink);color:#000;padding:2px 8px;
  border-radius:12px;font-size:11px;font-weight:700;
}

.footer{text-align:center;opacity:.55;margin:24px 0;font-style:italic;}
.version{position:fixed;bottom:12px;right:14px;font-size:11px;opacity:.5;}
.newTipBubble{
  position:fixed;bottom:70px;right:14px;background:linear-gradient(135deg,var(--pink),var(--hot));
  color:#000;padding:10px 16px;border-radius:999px;font-weight:700;cursor:pointer;box-shadow:0 8px 30px rgba(255,26,166,.45);
  display:none;z-index:99;
}
</style>
</head>
<body>

<header>
  <div>
    <div class="logo">xoxo <span>gossip girl</span></div>
    <div class="sub">happy christmas </div>
  </div>
  <button class="admin-btn" id="adminBtn">Received Tips <span id="tipBadge" class="badge" hidden>0</span></button>
</header>

<div class="wrap">
  <div class="card">
    <h3>Send Tips</h3>
    <textarea id="tipText" rows="4" placeholder="spill the tea…"></textarea>
    <img id="preview" class="preview" hidden>
    <div class="buttons">
      <button id="mediaBtn">Media</button>
      <button id="sendTip">Send</button>
      <input type="file" id="mediaInput" accept="image/*" hidden>
    </div>
  </div>

  <div class="card">
    <h3>Spotted!</h3>
    <div id="feed"></div>
  </div>
</div>

<div class="footer">u know u love me, xoxo gossip girl </div>
<div class="version">v1.2</div>
<div class="newTipBubble" id="newTipBubble">NEW TIP! Tap to review</div>

<script>
const FEED_KEY='xoxo_feed_v2';
const TIPS_KEY='xoxo_tips_v2';
const ADMIN_PASS='ykuluvmexoxogg2026xxx';

let feed=JSON.parse(localStorage.getItem(FEED_KEY)||'[]');
let tips=JSON.parse(localStorage.getItem(TIPS_KEY)||'[]');
let lastSeenTips=JSON.parse(localStorage.getItem('lastSeenTips')||'0');

const feedEl=document.getElementById('feed');
const tipText=document.getElementById('tipText');
const mediaInput=document.getElementById('mediaInput');
const preview=document.getElementById('preview');
const mediaBtn=document.getElementById('mediaBtn');
const sendTip=document.getElementById('sendTip');
const adminBtn=document.getElementById('adminBtn');
const tipBadge=document.getElementById('tipBadge');
const newTipBubble=document.getElementById('newTipBubble');

let imageData=null;
mediaBtn.onclick=()=>mediaInput.click();
mediaInput.onchange=e=>{
  const file=e.target.files[0];
  if(!file)return;
  const r=new FileReader();
  r.onload=()=>{imageData=r.result;preview.src=imageData;preview.hidden=false;};
  r.readAsDataURL(file);
};

sendTip.onclick=()=>{
  if(!tipText.value.trim() && !imageData) return alert('say something first');
  tips.push({text:tipText.value.trim(),image:imageData,time:Date.now()});
  localStorage.setItem(TIPS_KEY,JSON.stringify(tips));
  tipText.value='';imageData=null;preview.hidden=true;
  alert('tip sent ');
  updateBadge();
  showNewTipBubble();
};

function updateBadge(){
  const count=tips.length;
  if(count>0){tipBadge.hidden=false;tipBadge.textContent=count;}
  else tipBadge.hidden=true;
}

function showNewTipBubble(){
  if(tips.length>0){
    newTipBubble.style.display='block';
  }
}
newTipBubble.onclick=()=>{
  localStorage.setItem('currentPost',feed.length); // point to latest tip
  location.href='comments.html';
};

function timeAgo(t){
  const diff=Date.now()-t;
  if(diff<60000) return Math.floor(diff/1000)+' sec ago';
  if(diff<3600000) return Math.floor(diff/60000)+' min ago';
  const d=new Date(t);
  const now=new Date();
  if(d.toDateString()===now.toDateString()) return 'Today at '+d.getHours()+':'+String(d.getMinutes()).padStart(2,'0');
  const yesterday=new Date(); yesterday.setDate(now.getDate()-1);
  if(d.toDateString()===yesterday.toDateString()) return 'Yesterday at '+d.getHours()+':'+String(d.getMinutes()).padStart(2,'0');
  return d.toLocaleString();
}

function renderFeed(){
  feedEl.innerHTML='';
  feed.slice().reverse().forEach((p,i)=>{
    const d=document.createElement('div');
    d.className='post';
    let brief=p.text? p.text.split('\n')[0] : '';
    d.innerHTML=`${p.image?`<img src="${p.image}">`:''}<div>${brief||'[Image]'}</div><div class="time">${timeAgo(p.time)}</div>`;
    d.onclick=()=>{localStorage.setItem('currentPost',feed.length-1-i); location.href='comments.html';};
    feedEl.appendChild(d);
  });
}

function loadTipsToFeed(){
  if(tips.length>0){
    feed.push(...tips); tips=[];
    localStorage.setItem(FEED_KEY,JSON.stringify(feed));
    localStorage.setItem(TIPS_KEY,JSON.stringify(tips));
    renderFeed();
    updateBadge();
    if(Notification.permission==='granted'){
      new Notification('SPOTTED! Click to view',{body:'A new tip has been approved'});
    }
  }
}

updateBadge();
renderFeed();
loadTipsToFeed();

adminBtn.onclick=()=>{
  const p=prompt('password');
  if(p===ADMIN_PASS) location.href='received-tips.html';
  else alert('wrong password');
};

if(Notification.permission!=='granted'){setTimeout(()=>Notification.requestPermission(),1200);}
</script>

</body>
</html>